{"version":3,"sources":["assets/index.js"],"names":["MediaPlayer","config","media","el","plugins","_initPlugins","prototype","player","play","pause","muted","value","forEach","plugin","run","togglePlay","paused","mute","unmute","toggleMuted","AutoPlay","AutoPause","constructor","threshold","handleIntersection","bind","handleVisibilityChange","observer","IntersectionObserver","observe","document","addEventListener","entries","entry","isVisible","intersectionRatio","visibilityState","video","querySelector","button","buttonMuted","onclick"],"mappings":"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","file":"assets.8f4429fc.js","sourceRoot":"..","sourcesContent":["//Media Player \nfunction MediaPlayer(config) {\n  this.media = config.el\n  this.plugins = config.plugins || [];\n\n  this._initPlugins();\n}\n\nMediaPlayer.prototype._initPlugins = function() {\n  const player = {\n    play: () => this.play(),\n    pause: () => this.pause(),\n    media: this.media,\n\n    get muted() {\n      return this.media.muted;\n    },\n    set muted(value) {\n      this.media.muted = value;\n    },\n  };\n  \n  this.plugins.forEach(plugin => {\n    plugin.run(player);\n  })\n}\n\nMediaPlayer.prototype.play = function() {\n  this.media.play();\n};\n\nMediaPlayer.prototype.pause = function() {\n    this.media.pause();\n};\n\nMediaPlayer.prototype.togglePlay = function() {\n    if(this.media.paused) {\n        this.play();\n    } else {\n        this.pause();\n    }\n};\n\nMediaPlayer.prototype.mute = function() {\n  this.media.muted = true;\n}\n\nMediaPlayer.prototype.unmute = function() {\n  this.media.muted = false;\n}\n\nMediaPlayer.prototype.toggleMuted = function() {\n  if(this.media.muted) {\n      this.unmute();\n  } else {\n      this.mute();\n  }\n};\n\n//plugin Autoplay\nfunction AutoPlay() {\n\n}\n\nAutoPlay.prototype.run = function(player) {\n  if(!player.muted){\n    player.muted = true;\n  }\n  player.play();\n};\n\n\n// AutoPause\n\nclass AutoPause {\n  constructor() {\n    this.threshold = 0.25;\n\n    this.handleIntersection = this.handleIntersection.bind(this);\n    this.handleVisibilityChange = this.handleVisibilityChange.bind(this);\n  }\n\n  run(player) {\n    this.player = player;\n\n    const observer = new IntersectionObserver(this.handleIntersection, {\n      threshold:  this.threshold\n     });\n     observer.observe(this.player.media);\n\n     document.addEventListener(\"visibilitychange\", this.handleVisibilityChange)\n  }\n\n\n  handleIntersection(entries) {\n    const entry = entries[0];\n\n    const isVisible = entry.intersectionRatio >  this.threshold\n\n    if(isVisible){\n      this.player.play();\n    } else {\n      this.player.pause();\n    }\n  }\n\n  handleVisibilityChange() {\n    const isVisible = document.visibilityState === \"visible\";\n    if (isVisible) {\n      this.player.play();\n    } else {\n      this.player.pause();\n    }\n  }\n}\n\n\n//index.js\n\nconst video = document.querySelector(\"video\");\nconst button = document.querySelector('#playButton');  \n\nconst buttonMuted = document.querySelector('#mutedButton')  \nconst player = new MediaPlayer({el: video, plugins: [new AutoPlay(), new AutoPause()\n]});\n\nbutton.onclick = () => player.togglePlay();\nbuttonMuted.onclick = () => player.toggleMuted();\n\n//service worker\n\n// if ('serviceWorker' in navigator) {\n//   navigator.serviceWorker.register('/sw.js').catch(error => {\n//     console.log(error.message);\n//   });\n// }\n"]}